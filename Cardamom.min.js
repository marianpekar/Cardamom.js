(function(b){function a(){var e={};var d=function(k,l){this.color=k;this.value=l};var g=function(k){this.cards=k};var h=function(k){this.cards=k};var j=function(l,k){this.decks=l;this.cards=k};var f=function(k,l){return new d(k,l)};e.CreateDeck=function(l,p){var m=new g([]);for(var k=1;k<=l;k++){for(var n=1;n<=p;n++){m.cards.push(f(k,n))}}return m};e.CreateDeckWithOffset=function(l,r,n,p){var m=new g([]);for(var k=n;k<l+n;k++){for(var q=p;q<r+p;q++){m.cards.push(f(k,q))}}return m};e.CreateTable=function(k){return new j(k,[])};e.CreateHand=function(){return new h([])};e.Merge=function(k,l){for(o=0;o<l.length;o++){for(c=0;c<l[o].cards.length;c++){k.cards.push(l[o].cards[c])}while(l[o].cards.length>0){l[o].cards.pop()}}};e.Shuffle=function(m){var p=[],l=m.cards.length,k;while(l){k=Math.floor(Math.random()*m.cards.length);if(k in m.cards){p.push(m.cards[k]);delete m.cards[k];l--}}m.cards=p};e.Flip=function(k){k.cards.reverse()};e.Split=function(l,k){if(l.constructor.name==="Deck"){return new g(l.cards.splice(k,l.cards.length-k))}if(l.constructor.name==="Hand"){return new h(l.cards.splice(k,l.cards.length-k))}};this.sides={top:"top",bottom:"bottom"};e.MoveCard=function(n,l,m,p){if(m==sides.top){var k=n.cards.shift()}else{if(m==sides.bottom){var k=n.cards.pop()}}if(p==sides.top){l.cards.unshift(k)}else{if(p==sides.bottom){l.cards.push(k)}}};e.MoveCards=function(p,l,m,q,k){for(var n=0;n<k;n++){e.MoveCard(p,l,m,q)}};e.MoveCardsFromIndex=function(p,m,q,l,n){var k=p.cards.splice(n,l);if(q==sides.top){k.reverse()}for(i=0;i<k.length;i++){if(q==sides.top){m.cards.unshift(k[i])}else{if(q==sides.bottom){m.cards.push(k[i])}}}};this.compare={color:"color",value:"value",both:"both",bigger:"bigger",smaller:"smaller",next:"next",previous:"previous"};e.CompareCards=function(k,l,m){if(m==compare.color){return k.color==l.color}if(m==compare.value){return k.value==l.value}if(m==compare.both){return(k.color==l.color)&&(k.value==l.value)}if(m==compare.bigger){return k.value>l.value}if(m==compare.smaller){return k.value<l.value}if(m==compare.next){return(k.value-1)==l.value&&(k.color==l.color)}if(m==compare.previous){return(k.value+1)==l.value&&(k.color==l.color)}};e.IsSumOver=function(k,m){var l=0;for(i=0;i<k.cards.length;i++){l+=k.cards[i].value}return l>m};e.IsSumUnder=function(l,n){var m=0;for(var k=0;k<l.cards.length;k++){m+=l.cards[k].value}return m<n};e.IsSumEqual=function(l,n){var m=0;for(var k=0;k<l.cards.length;k++){m+=l.cards[k].value}return m==n};e.AreAllValuesEqual=function(l){for(var k=0;k<l.cards.length-1;k++){if(l.cards[k].value!=l.cards[k+1].value){return false}}return true};e.AreAllValuesEqualTo=function(l,m){for(var k=0;k<l.cards.length-1;k++){if(l.cards[k].value!=m){return false}}return true};e.AreAllColorsEqual=function(l){for(var k=0;k<l.cards.length;k++){if(l.cards[k].color!=l.cards[k+1].color){return false}}return true};e.AreAllColorsEqualTo=function(m,k){for(var l=0;l<m.cards.length;l++){if(m.cards[l].color!=k){return false}}return true};e.HasAtLeastOne=function(m,k,n){for(var l=0;l<m.cards.length;l++){if(m.cards[l].color==k&&m.cards[l].value==n){return true}}return false};e.HasAtLeastOneOfColor=function(m,k){for(var l=0;l<m.cards.length;l++){if(m.cards[l].color==k){return true}}return false};e.HasAtLeastOneOfValue=function(l,m){for(var k=0;k<l.cards.length;k++){if(l.cards[k].value==m){return true}}return false};e.GetSumOfValues=function(k){var l=0;for(i=0;i<k.cards.length;i++){l+=k.cards[i].value}return l};e.GetSumOfValuesWithColor=function(l,k){var m=0;for(i=0;i<l.cards.length;i++){if(l.cards[i].color==k){m+=l.cards[i].value}}return m};e.GetColorOfCard=function(l,k){return l.cards[k].color};e.GetValueOfCard=function(l,k){return l.cards[k].value};e.GetRandomCardIndex=function(k){return Math.floor(Math.random()*k.cards.length+1)};e.GetCardOnIndex=function(l,k){return l.cards[k]};e.CountCards=function(k){return k.cards.length};e.CountCardsOfColor=function(n,k){var l=0;for(var m=0;m<n.cards.length;m++){if(n.cards[m].color==k){l++}}return l};e.CountCardsOfValue=function(m,n){var k=0;for(var l=0;l<m.cards.length;l++){if(m.cards[l].value==n){k++}}return k};e.CountCardsEqualTo=function(n,k,p){var l=0;for(var m=0;m<n.cards.length;m++){if(n.cards[m].color==k&&n.cards[m].value==p){l++}}return l};return e}if(typeof(b.Cardamom)==="undefined"){b.Cardamom=a()}})(window);